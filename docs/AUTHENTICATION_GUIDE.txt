â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    GUIA DE AUTENTICAÃ‡ÃƒO - FINANCIAL TRACKER                    
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”’ SISTEMA DE AUTENTICAÃ‡ÃƒO IMPLEMENTADO

O Financial Tracker agora possui um sistema completo de autenticaÃ§Ã£o com SSR
(Server-Side Rendering) para proteger suas credenciais do Google Sheets.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ CONFIGURAÃ‡ÃƒO INICIAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. CONFIGURAR CREDENCIAIS DE LOGIN
   
   Edite o arquivo .env.local e defina:
   
   AUTH_USERNAME=seu_usuario
   AUTH_PASSWORD=sua_senha_forte

   âš ï¸  IMPORTANTE: Use uma senha forte! Esta serÃ¡ a proteÃ§Ã£o da sua aplicaÃ§Ã£o.

2. GERAR SESSION_SECRET
   
   Execute no terminal:
   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
   
   Copie o resultado e adicione ao .env.local:
   SESSION_SECRET=resultado_aqui
   
   O SESSION_SECRET deve ter pelo menos 32 caracteres.

3. INSTALAR DEPENDÃŠNCIAS
   
   npm install
   
   Isso instalarÃ¡ o iron-session (biblioteca de sessÃµes seguras).

4. INICIAR APLICAÃ‡ÃƒO
   
   npm run dev
   
   Acesse: http://localhost:3000

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ›¡ï¸ COMO FUNCIONA A SEGURANÃ‡A
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. AUTENTICAÃ‡ÃƒO OBRIGATÃ“RIA
   - Ao acessar a aplicaÃ§Ã£o, vocÃª serÃ¡ redirecionado para /login
   - Login com usuÃ¡rio e senha definidos no .env.local
   - SessÃ£o vÃ¡lida por 7 dias

2. CREDENCIAIS PROTEGIDAS (SSR)
   - Google Sheets ID e API Key NUNCA sÃ£o expostas no frontend
   - Todas as requisiÃ§Ãµes passam por API Routes protegidas
   - Apenas usuÃ¡rios autenticados podem acessar dados

3. SESSÃ•ES SEGURAS
   - Cookies httpOnly (nÃ£o acessÃ­veis via JavaScript)
   - Criptografia AES-256 com iron-session
   - Cookies seguros em produÃ§Ã£o (HTTPS only)

4. PROTEÃ‡ÃƒO DE ROTAS
   - PÃ¡gina principal (/) protegida com getServerSideProps
   - API routes protegidas com middleware withAuth
   - Logout automÃ¡tico em caso de sessÃ£o invÃ¡lida

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ ARQUITETURA DO SISTEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

financialapp/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index.js                    # Dashboard (protegido com SSR)
â”‚   â”œâ”€â”€ login.js                    # PÃ¡gina de login
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â”œâ”€â”€ login.js           # POST /api/auth/login
â”‚       â”‚   â”œâ”€â”€ logout.js          # POST /api/auth/logout
â”‚       â”‚   â””â”€â”€ me.js              # GET /api/auth/me
â”‚       â””â”€â”€ sheets/
â”‚           â””â”€â”€ transactions.js    # GET /api/sheets/transactions (protegido)
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ session.js                 # ConfiguraÃ§Ã£o iron-session + helpers
â””â”€â”€ .env.local                     # Credenciais (NUNCA commitar!)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ FLUXO DE AUTENTICAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. PRIMEIRO ACESSO
   Usuario acessa http://localhost:3000
   â””â”€> NÃ£o autenticado
       â””â”€> Redirecionado para /login
           â””â”€> Insere usuÃ¡rio e senha
               â””â”€> POST /api/auth/login
                   â””â”€> Cria sessÃ£o
                       â””â”€> Redirecionado para /

2. CARREGAMENTO DO DASHBOARD
   getServerSideProps verifica sessÃ£o
   â””â”€> SessÃ£o vÃ¡lida
       â””â”€> Renderiza dashboard
           â””â”€> useEffect busca dados
               â””â”€> GET /api/sheets/transactions
                   â””â”€> Middleware verifica sessÃ£o
                       â””â”€> Busca dados do Google Sheets
                           â””â”€> Retorna para frontend

3. LOGOUT
   Usuario clica "Sair"
   â””â”€> POST /api/auth/logout
       â””â”€> Destroi sessÃ£o
           â””â”€> Redirecionado para /login

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš™ï¸ VARIÃVEIS DE AMBIENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Arquivo: .env.local

# AutenticaÃ§Ã£o
AUTH_USERNAME=admin                      # Seu usuÃ¡rio
AUTH_PASSWORD=senha_forte_aqui           # Sua senha (min 8 caracteres)
SESSION_SECRET=32+_caracteres_random     # Secret para cookies

# Google Sheets (protegido no servidor)
NEXT_PUBLIC_GOOGLE_SHEETS_ID=...        # ID do seu Google Sheet
NEXT_PUBLIC_GOOGLE_API_KEY=...          # API Key do Google Cloud

âš ï¸  NUNCA commite o arquivo .env.local para o Git!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ DEPLOY EM PRODUÃ‡ÃƒO (VERCEL)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Push para GitHub (sem .env.local!)

2. No dashboard da Vercel:
   - Settings â†’ Environment Variables
   - Adicionar TODAS as variÃ¡veis do .env.local:
     * AUTH_USERNAME
     * AUTH_PASSWORD
     * SESSION_SECRET
     * NEXT_PUBLIC_GOOGLE_SHEETS_ID
     * NEXT_PUBLIC_GOOGLE_API_KEY

3. Deploy automÃ¡tico

4. IMPORTANTE: Em produÃ§Ã£o, cookies serÃ£o secure (HTTPS only)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” BOAS PRÃTICAS DE SEGURANÃ‡A
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… FAZER:
- Usar senhas fortes (min 12 caracteres, letras + nÃºmeros + sÃ­mbolos)
- Gerar SESSION_SECRET aleatÃ³rio e Ãºnico
- Usar HTTPS em produÃ§Ã£o
- Fazer backup das variÃ¡veis de ambiente
- Mudar senha periodicamente
- Fazer logout ao sair

âŒ NÃƒO FAZER:
- Commitar .env.local para Git
- Usar senhas fracas tipo "123456"
- Compartilhar credenciais
- Expor SESSION_SECRET publicamente
- Reutilizar SESSION_SECRET de outros projetos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ› TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ "NÃ£o autenticado" ao fazer login
â†’ Verifica se AUTH_USERNAME e AUTH_PASSWORD estÃ£o corretos no .env.local
â†’ Verifica se SESSION_SECRET estÃ¡ definido (min 32 caracteres)
â†’ Reinicia o servidor: npm run dev

âŒ "Session secret must be at least 32 characters"
â†’ Gera novo secret: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
â†’ Adiciona ao .env.local

âŒ Erro ao buscar dados do Google Sheets
â†’ Verifica se NEXT_PUBLIC_GOOGLE_SHEETS_ID estÃ¡ correto
â†’ Verifica se NEXT_PUBLIC_GOOGLE_API_KEY estÃ¡ correto
â†’ Verifica se Google Sheet estÃ¡ compartilhado como pÃºblico
â†’ Verifica se Google Sheets API estÃ¡ ativada

âŒ Logout nÃ£o funciona
â†’ Limpa cookies do navegador
â†’ Reinicia servidor

âŒ Em produÃ§Ã£o nÃ£o funciona
â†’ Verifica se TODAS as variÃ¡veis estÃ£o na Vercel
â†’ Verifica logs em Vercel Dashboard

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“š RECURSOS ADICIONAIS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

iron-session docs: https://github.com/vvo/iron-session
Next.js API Routes: https://nextjs.org/docs/api-routes/introduction
Next.js getServerSideProps: https://nextjs.org/docs/basic-features/data-fetching

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
